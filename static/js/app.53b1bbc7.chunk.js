(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{313:function(e,t,n){"use strict";n.d(t,"a",(function(){return X}));var a=n(1),r=n.n(a),o=n(255),i=n(495),c=n(97),s=n(2),u=n(20),l=function(e){e.route;var t=e.navigation;return r.a.createElement(c.a,{style:m.container},r.a.createElement(u.c,{h4:!0,style:{marginBottom:30}},"Need an idea for a movie to watch? Check out the lists!"),r.a.createElement(u.c,{h3:!0,style:{marginBottom:20}},"Movie Lists"),r.a.createElement(u.a,{title:"See Lists",onPress:function(){t.navigate("Lists",{})},style:m.button}),!1)},m=s.a.create({container:{flex:1,alignItems:"center",margin:20},button:{marginBottom:20}}),v=n(12),f=n.n(v),d=n(13),p=n.n(d),h=n(14),E=n.n(h),y=n(15),b=n.n(y),g=n(7),I=n.n(g),S=n(3),j=n(201);j.initializeApp({apiKey:"AIzaSyCc7bc5d8oxIHvy_zyMaG-fYjecX_FuEjo",authDomain:"marcs-movies.firebaseapp.com",databaseURL:"https://marcs-movies.firebaseio.com",projectId:"marcs-movies",storageBucket:"marcs-movies.appspot.com",messagingSenderId:"502568475623",appId:"1:502568475623:web:6fdb31741a1ee95bd2bb42",measurementId:"G-CDV1J8J40Q"});var k=j.database(),M=n(36),R=n(29);function L(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=I()(e);if(t){var r=I()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return b()(this,n)}}var O=function(e){E()(n,e);var t=L(n);function n(){return f()(this,n),t.apply(this,arguments)}return p()(n,[{key:"handlePress",value:function(){this.props.onPress,0}},{key:"handleEdit",value:function(){this.props.editable&&this.props.onEdit,0}},{key:"render",value:function(){var e=this,t={marginTop:5,marginBottom:5},n={fontWeight:"bold"};return r.a.createElement(r.a.Fragment,null,null!=this.props.movie&&r.a.createElement(R.a,{style:D.movieCard,onPress:function(){return e.handlePress(e.props.movie.id)}},r.a.createElement(S.a,{style:{flex:1,flexDirection:"row",marginBottom:10}},r.a.createElement(u.c,{h4:!0,style:{flexGrow:1}},this.props.movie.title," (",this.props.movie.year,")"),this.props.editable&&!1),r.a.createElement(S.a,{style:{flex:1,flexDirection:"row"}},r.a.createElement(M.a,{source:{uri:this.props.movie.poster},style:{flex:1,resizeMode:"contain",margin:10}}),r.a.createElement(S.a,{style:{flex:1}},r.a.createElement(u.c,{style:t},r.a.createElement(u.c,{style:n},"Genres: "),this.props.movie.genre),r.a.createElement(u.c,{style:t},r.a.createElement(u.c,{style:n},"Runtime: "),this.props.movie.runtime),r.a.createElement(u.c,{style:t},r.a.createElement(u.c,{style:n},"Actors: "),this.props.movie.actors),r.a.createElement(u.c,{style:t},r.a.createElement(u.c,{style:n},"Director: "),this.props.movie.director),r.a.createElement(u.c,{style:t},r.a.createElement(u.c,{style:n},"IMDB Rating: "),this.props.movie.imdbRating))),r.a.createElement(u.c,{style:t},this.props.movie.plot)))}}]),n}(a.Component),D=s.a.create({movieCard:{backgroundColor:"#fff",padding:15,borderRadius:10,marginBottom:20}});function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=I()(e);if(t){var r=I()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return b()(this,n)}}var C=function(e){E()(n,e);var t=B(n);function n(e){var a;return f()(this,n),(a=t.call(this,e)).state={imdbID:"",movie:null},a}return p()(n,[{key:"handleImdbIDChange",value:function(e){if(e){var t=e.toLowerCase();this.setState({imdbID:t})}}},{key:"handleSearch",value:function(){var e=this,t="https://movie-database-imdb-alternative.p.rapidapi.com/?r=json&i="+this.state.imdbID;fetch(t,{method:"GET",headers:{"x-rapidapi-host":"movie-database-imdb-alternative.p.rapidapi.com","x-rapidapi-key":"20cb930c7amshc248a9c3f59cb3bp13c3c5jsn6150c7779d2b",useQueryString:!0}}).then((function(e){return e.json()})).then((function(t){e.parseMovieData(t),e.setState({imdbID:""})}))}},{key:"parseMovieData",value:function(e){var t={title:e.Title,year:e.Year,genre:e.Genre,actors:e.Actors,runtime:e.Runtime,director:e.Director,imdbRating:e.imdbRating,plot:e.Plot,poster:e.Poster};this.setState({movie:t})}},{key:"handleAddMovie",value:function(){k.ref("movies").push(this.state.movie),this.props.onReturnHome()}},{key:"handleBack",value:function(){this.setState({movie:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(S.a,{style:P.container},null==this.state.movie&&r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{label:"IMDB Movie ID",onChangeText:function(t){return e.handleImdbIDChange(t)}}),r.a.createElement(u.a,{title:"Search IMBD",onPress:function(){return e.handleSearch()}})),null!=this.state.movie&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{movie:this.state.movie}),r.a.createElement(u.a,{title:"Add Movie",onPress:function(){return e.handleAddMovie()},containerStyle:{marginBottom:15}}),r.a.createElement(u.a,{title:"Back to Search",onPress:function(){return e.handleBack()},containerStyle:{marginBottom:15}})))}}]),n}(a.Component),P=s.a.create({container:{padding:20}}),w=function(e){e.route;var t=e.navigation;return r.a.createElement(c.a,null,r.a.createElement(C,{onReturnHome:function(){t.navigate("Movies",{})}}))},x=n(19),A=n.n(x),F=n(26),T=function(e){e.route;var t=e.navigation,n=Object(a.useState)(),o=A()(n,2),i=o[0],c=o[1];Object(a.useEffect)((function(){s();t.addListener("focus",(function(){s()}))}),[]);var s=function(){k.ref("movies").once("value",(function(e){var t=[];e.forEach((function(e){var n=e.val();n.id=e.key,t.push(n)})),t.sort((function(e,t){var n=e.title.toLowerCase(),a=t.title.toLowerCase();return n<a?-1:n>a?1:0})),c(t)}))};return i?r.a.createElement(S.a,{style:G.container},r.a.createElement(u.a,{title:"Add Movie",onPress:function(){t.navigate("Add Movie",{})},style:G.button}),i.map((function(e){return r.a.createElement(O,{key:e.id,movie:e})}))):r.a.createElement(S.a,{style:G.container},r.a.createElement(F.a,null,"Loading..."))},G=s.a.create({container:{padding:20},button:{marginBottom:20}}),H=function(e){e.route;var t=e.navigation,n=Object(a.useState)(),o=A()(n,2),i=o[0],c=o[1],s=Object(a.useState)(!1),l=A()(s,2),m=l[0],v=l[1],f=Object(a.useState)(),d=A()(f,2),p=d[0],h=d[1];Object(a.useEffect)((function(){v(!1),E()}),[]);var E=function(){k.ref("lists").once("value",(function(e){var t=[];e.forEach((function(e){var n=e.val();n.id=e.key,n.movies?n.movieIds=Object.entries(n.movies).map((function(e){var t=A()(e,2);t[0];return t[1]})):(n.movies=[],n.movieIds=[]),t.push(n)})),t.sort((function(e,t){var n=e.name.toLowerCase(),a=t.name.toLowerCase();return n<a?-1:n>a?1:0})),c(t)}))};return m?r.a.createElement(S.a,{style:z.container},r.a.createElement(u.b,{label:"List Name",onChangeText:function(e){h(e)}}),r.a.createElement(u.a,{title:"Add",onPress:function(){k.ref("lists").push({name:p}),v(!1),E()},style:z.button}),r.a.createElement(u.a,{title:"Cancel",onPress:function(){v(!1)},style:z.button})):i?r.a.createElement(S.a,{style:z.container},i.map((function(e){return r.a.createElement(u.a,{key:e.id,title:e.name,type:"outline",style:z.button,onPress:function(){return n=e.id,a=e.name,r=e.movieIds,void t.navigate("List",{id:n,name:a,movieIds:r});var n,a,r}})})),!1):r.a.createElement(S.a,{style:z.container},r.a.createElement(F.a,null,"Loading..."))},z=s.a.create({container:{padding:20},button:{marginBottom:20}}),J=function(e){var t=e.route,n=e.navigation,o=Object(a.useState)(),i=A()(o,2),c=i[0],s=i[1],l=Object(a.useState)([]),m=A()(l,2),v=m[0],f=m[1],d=Object(a.useState)([]),p=A()(d,2),h=p[0],E=p[1];Object(a.useEffect)((function(){s(t.params.id),f(t.params.movieIds),y(t.params.movieIds);n.addListener("focus",(function(){y(t.params.movieIds)}))}),[]);var y=function(e){E([]),k.ref("movies").once("value",(function(t){var n=[];t.forEach((function(e){var t=e.val();t.id=e.key,n.push(t)})),n=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(n=n.filter((function(t){return e.includes(t.id)}))),E(n)}))};var b=function(e){n.navigate("Remove Movie From List",{listId:c,movieIds:v,movie:e})};return r.a.createElement(S.a,{style:N.container},r.a.createElement(u.c,{h3:!0,style:{marginBottom:20}},"Total Movies: ",h.length),r.a.createElement(u.a,{title:"Random Movie",onPress:function(){n.navigate("Random Movie",{movieIds:v})},style:N.button}),!1,h.map((function(e){return r.a.createElement(O,{key:e.id,movie:e,editable:!0,onEdit:b})})))},N=s.a.create({container:{padding:20},button:{marginBottom:20}}),W=function(e){var t=e.route,n=e.navigation,o=Object(a.useState)(),i=A()(o,2),c=i[0],s=i[1],u=Object(a.useState)([]),l=A()(u,2),m=l[0],v=l[1],f=Object(a.useState)([]),d=A()(f,2),p=d[0],h=d[1];Object(a.useEffect)((function(){s(t.params.listId),v(t.params.movieIds),E(t.params.movieIds);n.addListener("focus",(function(){E(t.params.movieIds)}))}),[]);var E=function(e){k.ref("movies").once("value",(function(t){var n=[];t.forEach((function(e){var t=e.val();t.id=e.key,n.push(t)})),(n=n.filter((function(t){return!e.includes(t.id)}))).sort((function(e,t){var n=e.title.toLowerCase(),a=t.title.toLowerCase();return n<a?-1:n>a?1:0})),h(n)}))},y=function(e){k.ref("lists/"+c+"/movies").push(e).then((function(){var t=m;t.push(e),n.navigate("List",{id:c,movieIds:t})}))};return p?r.a.createElement(S.a,{style:Q.container},p.map((function(e){return r.a.createElement(O,{key:e.id,movie:e,onPress:y})}))):r.a.createElement(S.a,{style:Q.container},r.a.createElement(F.a,null,"Loading..."))},Q=s.a.create({container:{padding:20}}),Y=function(e){var t=e.route,n=e.navigation,o=Object(a.useState)(),i=A()(o,2),c=i[0],s=i[1],l=Object(a.useState)({}),m=A()(l,2),v=m[0],f=m[1],d=Object(a.useState)([]),p=A()(d,2),h=p[0],E=p[1];Object(a.useEffect)((function(){s(t.params.listId),f(t.params.movie),E(t.params.movieIds)}),[]);var y=function(){var e=h,t=e.indexOf(v.id);e.splice(t,1),n.navigate("List",{id:c,movieIds:e})};return r.a.createElement(S.a,{style:_.container},r.a.createElement(u.c,{h4:!0,style:{marginBottom:20}},"Remove ",v.title," (",v.year,") from the list?"),r.a.createElement(u.a,{title:"Remove",onPress:function(){k.ref("lists/"+c+"/movies").once("value",(function(e){e.forEach((function(e){e.val()==v.id&&e.ref.remove().then((function(){y()}))}))}))},style:_.button}),r.a.createElement(u.a,{title:"Cancel",onPress:function(){n.navigate("List",{id:c,movieIds:newMovieIds})},style:_.button,type:"outline"}))},_=s.a.create({container:{padding:20},button:{marginBottom:20}}),K=function(e){var t=e.route,n=(e.navigation,Object(a.useState)()),o=A()(n,2),i=o[0],c=o[1],s=Object(a.useState)([]),l=A()(s,2),m=l[0],v=l[1];Object(a.useEffect)((function(){v(t.params.movieIds),f(t.params.movieIds)}),[]);var f=function(e){var t=e[Math.floor(Math.random()*e.length)];k.ref("movies/"+t).once("value",(function(e){c(e.val())}))};return r.a.createElement(S.a,{style:U.container},i&&r.a.createElement(O,{movie:i}),r.a.createElement(u.a,{title:"Refresh",onPress:function(){return f(m)},style:U.button}))},U=s.a.create({container:{padding:20}}),V=Object(i.a)();function X(){return r.a.createElement(o.a,null,r.a.createElement(V.Navigator,{initialRouteName:"Home"},r.a.createElement(V.Screen,{name:"Home",component:l}),r.a.createElement(V.Screen,{name:"Add Movie",component:w}),r.a.createElement(V.Screen,{name:"Movies",component:T}),r.a.createElement(V.Screen,{name:"Lists",component:H}),r.a.createElement(V.Screen,{name:"List",component:J,options:function(e){return{title:e.route.params.name}}}),r.a.createElement(V.Screen,{name:"Add Movie To List",component:W}),r.a.createElement(V.Screen,{name:"Remove Movie From List",component:Y}),r.a.createElement(V.Screen,{name:"Random Movie",component:K})))}},325:function(e,t,n){n(326),e.exports=n(484)},326:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/marcs-movies/expo-service-worker.js",{scope:"/marcs-movies/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))}},[[325,1,2]]]);
//# sourceMappingURL=app.53b1bbc7.chunk.js.map