(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{317:function(e,t,n){"use strict";n.d(t,"a",(function(){return oe}));var a=n(1),i=n.n(a),r=n(259),o=n(500),c=n(98),s=n(2),l=n(20),u=n(53),m=function(e){e.route;var t=e.navigation,n=Object(u.c)((function(e){return e}));return i.a.createElement(c.a,{style:v.container},i.a.createElement(l.c,{h4:!0,style:{marginBottom:30}},"Need an idea for a movie to watch? Check out the lists!"),i.a.createElement(l.c,{h3:!0,style:{marginBottom:20}},"Movie Lists"),i.a.createElement(l.a,{title:"See Lists",onPress:function(){t.navigate("Lists",{})},style:v.button}),n.can_edit&&i.a.createElement(i.a.Fragment,null,i.a.createElement(l.c,{h3:!0,style:{marginBottom:20}},"Movie Management"),i.a.createElement(l.a,{title:"Manage",onPress:function(){t.navigate("Movies",{})},style:v.button})),i.a.createElement(l.a,{title:"Admin Login",type:"outline",onPress:function(){t.navigate("Login",{})},style:v.button}))},v=s.a.create({container:{flex:1,alignItems:"center",margin:20},button:{marginBottom:20}}),d=n(12),f=n.n(d),p=n(13),h=n.n(p),E=n(14),y=n.n(E),g=n(15),b=n.n(g),S=n(7),I=n.n(S),j=n(3),k=n(174);k.initializeApp({apiKey:"AIzaSyCc7bc5d8oxIHvy_zyMaG-fYjecX_FuEjo",authDomain:"marcs-movies.firebaseapp.com",databaseURL:"https://marcs-movies.firebaseio.com",projectId:"marcs-movies",storageBucket:"marcs-movies.appspot.com",messagingSenderId:"502568475623",appId:"1:502568475623:web:6fdb31741a1ee95bd2bb42",measurementId:"G-CDV1J8J40Q"});var M=k.database(),L=k.auth(),O=n(36),P=n(29);function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=I()(e);if(t){var i=I()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var _=function(e){y()(n,e);var t=R(n);function n(){return f()(this,n),t.apply(this,arguments)}return h()(n,[{key:"handlePress",value:function(){this.props.onPress&&this.props.editing_enabled&&this.props.onPress(this.props.movie.id)}},{key:"handleEdit",value:function(){this.props.editable&&this.props.onEdit&&this.props.editing_enabled&&this.props.onEdit(this.props.movie)}},{key:"render",value:function(){var e=this,t={marginTop:5,marginBottom:5},n={fontWeight:"bold"};return i.a.createElement(i.a.Fragment,null,null!=this.props.movie&&i.a.createElement(P.a,{style:D.movieCard,onPress:function(){return e.handlePress(e.props.movie.id)}},i.a.createElement(j.a,{style:{flex:1,flexDirection:"row",marginBottom:10}},i.a.createElement(l.c,{h4:!0,style:{flexGrow:1}},this.props.movie.title," (",this.props.movie.year,")"),this.props.editable&&this.props.editing_enabled&&i.a.createElement(l.a,{title:"Edit",type:"outline",titleStyle:{fontSize:12},onPress:function(){return e.handleEdit()}})),i.a.createElement(j.a,{style:{flex:1,flexDirection:"row"}},i.a.createElement(O.a,{source:{uri:this.props.movie.poster},style:{flex:1,resizeMode:"contain",margin:10}}),i.a.createElement(j.a,{style:{flex:1}},i.a.createElement(l.c,{style:t},i.a.createElement(l.c,{style:n},"Genres: "),this.props.movie.genre),i.a.createElement(l.c,{style:t},i.a.createElement(l.c,{style:n},"Runtime: "),this.props.movie.runtime),i.a.createElement(l.c,{style:t},i.a.createElement(l.c,{style:n},"Actors: "),this.props.movie.actors),i.a.createElement(l.c,{style:t},i.a.createElement(l.c,{style:n},"Director: "),this.props.movie.director),i.a.createElement(l.c,{style:t},i.a.createElement(l.c,{style:n},"IMDB Rating: "),this.props.movie.imdbRating))),i.a.createElement(l.c,{style:t},this.props.movie.plot)))}}]),n}(a.Component),D=s.a.create({movieCard:{backgroundColor:"#fff",padding:15,borderRadius:10,marginBottom:20}});function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=I()(e);if(t){var i=I()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var B=function(e){y()(n,e);var t=C(n);function n(e){var a;return f()(this,n),(a=t.call(this,e)).state={imdbID:"",movie:null},a}return h()(n,[{key:"handleImdbIDChange",value:function(e){if(e){var t=e.toLowerCase();this.setState({imdbID:t})}}},{key:"handleSearch",value:function(){var e=this,t="https://movie-database-imdb-alternative.p.rapidapi.com/?r=json&i="+this.state.imdbID;fetch(t,{method:"GET",headers:{"x-rapidapi-host":"movie-database-imdb-alternative.p.rapidapi.com","x-rapidapi-key":this.props.rapid_api_key,useQueryString:!0}}).then((function(e){return e.json()})).then((function(t){e.parseMovieData(t),e.setState({imdbID:""})}))}},{key:"parseMovieData",value:function(e){var t={title:e.Title,year:e.Year,genre:e.Genre,actors:e.Actors,runtime:e.Runtime,director:e.Director,imdbRating:e.imdbRating,plot:e.Plot,poster:e.Poster};this.setState({movie:t})}},{key:"handleAddMovie",value:function(){M.ref("movies").push(this.state.movie),this.props.onReturnHome()}},{key:"handleBack",value:function(){this.setState({movie:null})}},{key:"render",value:function(){var e=this;return i.a.createElement(j.a,{style:w.container},null==this.state.movie&&i.a.createElement(i.a.Fragment,null,i.a.createElement(l.b,{label:"IMDB Movie ID",onChangeText:function(t){return e.handleImdbIDChange(t)}}),i.a.createElement(l.a,{title:"Search IMBD",onPress:function(){return e.handleSearch()}})),null!=this.state.movie&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_,{movie:this.state.movie}),i.a.createElement(l.a,{title:"Add Movie",onPress:function(){return e.handleAddMovie()},containerStyle:{marginBottom:15}}),i.a.createElement(l.a,{title:"Back to Search",onPress:function(){return e.handleBack()},containerStyle:{marginBottom:15}})))}}]),n}(a.Component),w=s.a.create({container:{padding:20}}),x=function(e){e.route;var t=e.navigation,n=Object(u.c)((function(e){return e}));return i.a.createElement(c.a,null,i.a.createElement(B,{onReturnHome:function(){t.navigate("Movies",{})},rapid_api_key:n.rapid_api_key}))},A=n(18),T=n.n(A),F=n(26),G=function(e){e.route;var t=e.navigation,n=Object(a.useState)(),r=T()(n,2),o=r[0],c=r[1];Object(a.useEffect)((function(){s();t.addListener("focus",(function(){s()}))}),[]);var s=function(){M.ref("movies").once("value",(function(e){var t=[];e.forEach((function(e){var n=e.val();n.id=e.key,t.push(n)})),t.sort((function(e,t){var n=e.title.toLowerCase(),a=t.title.toLowerCase();return n<a?-1:n>a?1:0})),c(t)}))};return o?i.a.createElement(j.a,{style:H.container},i.a.createElement(l.a,{title:"Add Movie",onPress:function(){t.navigate("Add Movie",{})},style:H.button}),o.map((function(e){return i.a.createElement(_,{key:e.id,movie:e})}))):i.a.createElement(j.a,{style:H.container},i.a.createElement(F.a,null,"Loading..."))},H=s.a.create({container:{padding:20},button:{marginBottom:20}}),z=function(e){e.route;var t=e.navigation,n=Object(a.useState)(),r=T()(n,2),o=r[0],c=r[1],s=Object(a.useState)(!1),m=T()(s,2),v=m[0],d=m[1],f=Object(a.useState)(),p=T()(f,2),h=p[0],E=p[1],y=Object(u.c)((function(e){return e}));Object(a.useEffect)((function(){d(!1),g()}),[]);var g=function(){M.ref("lists").once("value",(function(e){var t=[];e.forEach((function(e){var n=e.val();n.id=e.key,n.movies?n.movieIds=Object.entries(n.movies).map((function(e){var t=T()(e,2);t[0];return t[1]})):(n.movies=[],n.movieIds=[]),t.push(n)})),t.sort((function(e,t){var n=e.name.toLowerCase(),a=t.name.toLowerCase();return n<a?-1:n>a?1:0})),c(t)}))};return v?i.a.createElement(j.a,{style:J.container},i.a.createElement(l.b,{label:"List Name",onChangeText:function(e){E(e)}}),i.a.createElement(l.a,{title:"Add",onPress:function(){M.ref("lists").push({name:h}),d(!1),g()},style:J.button}),i.a.createElement(l.a,{title:"Cancel",onPress:function(){d(!1)},style:J.button})):o?i.a.createElement(j.a,{style:J.container},o.map((function(e){return i.a.createElement(l.a,{key:e.id,title:e.name,type:"outline",style:J.button,onPress:function(){return n=e.id,a=e.name,i=e.movieIds,void t.navigate("List",{id:n,name:a,movieIds:i});var n,a,i}})})),y.can_edit&&i.a.createElement(l.a,{title:"Add List",onPress:function(){d(!0)}})):i.a.createElement(j.a,{style:J.container},i.a.createElement(F.a,null,"Loading..."))},J=s.a.create({container:{padding:20},button:{marginBottom:20}}),N=function(e){var t=e.route,n=e.navigation,r=Object(a.useState)(),o=T()(r,2),c=o[0],s=o[1],m=Object(a.useState)([]),v=T()(m,2),d=v[0],f=v[1],p=Object(a.useState)([]),h=T()(p,2),E=h[0],y=h[1],g=Object(u.c)((function(e){return e}));Object(a.useEffect)((function(){s(t.params.id),f(t.params.movieIds),b(t.params.movieIds);n.addListener("focus",(function(){b(t.params.movieIds)}))}),[]);var b=function(e){y([]),M.ref("movies").once("value",(function(t){var n=[];t.forEach((function(e){var t=e.val();t.id=e.key,n.push(t)})),n=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(n=n.filter((function(t){return e.includes(t.id)}))),y(n)}))};var S=function(e){n.navigate("Remove Movie From List",{listId:c,movieIds:d,movie:e})};return i.a.createElement(j.a,{style:W.container},i.a.createElement(l.c,{h3:!0,style:{marginBottom:20}},"Total Movies: ",E.length),i.a.createElement(l.a,{title:"Random Movie",onPress:function(){n.navigate("Random Movie",{movieIds:d})},style:W.button}),g.can_edit&&i.a.createElement(l.a,{title:"Add Movie",onPress:function(){n.navigate("Add Movie To List",{listId:c,movieIds:d})},style:W.button}),E.map((function(e){return i.a.createElement(_,{key:e.id,movie:e,editable:!0,appState:g,editing_enabled:g.can_edit,onEdit:S})})))},W=s.a.create({container:{padding:20},button:{marginBottom:20}}),U=function(e){var t=e.route,n=e.navigation,r=Object(a.useState)(),o=T()(r,2),c=o[0],s=o[1],l=Object(a.useState)([]),m=T()(l,2),v=m[0],d=m[1],f=Object(a.useState)([]),p=T()(f,2),h=p[0],E=p[1],y=Object(u.c)((function(e){return e}));Object(a.useEffect)((function(){s(t.params.listId),d(t.params.movieIds),g(t.params.movieIds);n.addListener("focus",(function(){g(t.params.movieIds)}))}),[]);var g=function(e){M.ref("movies").once("value",(function(t){var n=[];t.forEach((function(e){var t=e.val();t.id=e.key,n.push(t)})),(n=n.filter((function(t){return!e.includes(t.id)}))).sort((function(e,t){var n=e.title.toLowerCase(),a=t.title.toLowerCase();return n<a?-1:n>a?1:0})),E(n)}))},b=function(e){M.ref("lists/"+c+"/movies").push(e).then((function(){var t=v;t.push(e),n.navigate("List",{id:c,movieIds:t})}))};return h?i.a.createElement(j.a,{style:Q.container},h.map((function(e){return i.a.createElement(_,{key:e.id,movie:e,appState:y,editing_enabled:y.can_edit,onPress:b})}))):i.a.createElement(j.a,{style:Q.container},i.a.createElement(F.a,null,"Loading..."))},Q=s.a.create({container:{padding:20}}),Y=function(e){var t=e.route,n=e.navigation,r=Object(a.useState)(),o=T()(r,2),c=o[0],s=o[1],u=Object(a.useState)({}),m=T()(u,2),v=m[0],d=m[1],f=Object(a.useState)([]),p=T()(f,2),h=p[0],E=p[1];Object(a.useEffect)((function(){s(t.params.listId),d(t.params.movie),E(t.params.movieIds)}),[]);var y=function(){var e=h,t=e.indexOf(v.id);e.splice(t,1),n.navigate("List",{id:c,movieIds:e})};return i.a.createElement(j.a,{style:K.container},i.a.createElement(l.c,{h4:!0,style:{marginBottom:20}},"Remove ",v.title," (",v.year,") from the list?"),i.a.createElement(l.a,{title:"Remove",onPress:function(){M.ref("lists/"+c+"/movies").once("value",(function(e){e.forEach((function(e){e.val()==v.id&&e.ref.remove().then((function(){y()}))}))}))},style:K.button}),i.a.createElement(l.a,{title:"Cancel",onPress:function(){n.navigate("List",{id:c,movieIds:newMovieIds})},style:K.button,type:"outline"}))},K=s.a.create({container:{padding:20},button:{marginBottom:20}}),V=function(e){var t=e.route,n=(e.navigation,Object(a.useState)()),r=T()(n,2),o=r[0],c=r[1],s=Object(a.useState)([]),u=T()(s,2),m=u[0],v=u[1];Object(a.useEffect)((function(){v(t.params.movieIds),d(t.params.movieIds)}),[]);var d=function(e){var t=e[Math.floor(Math.random()*e.length)];M.ref("movies/"+t).once("value",(function(e){c(e.val())}))};return i.a.createElement(j.a,{style:X.container},o&&i.a.createElement(_,{movie:o}),i.a.createElement(l.a,{title:"Refresh",onPress:function(){return d(m)},style:X.button}))},X=s.a.create({container:{padding:20}});var q=function(e){e.route;var t=e.navigation,n=Object(a.useState)(""),r=T()(n,2),o=r[0],c=r[1],s=Object(a.useState)(""),m=T()(s,2),v=m[0],d=m[1],f=Object(u.b)(),p=function(e){M.ref("rapid_api_key").once("value",(function(n){!function(e){f({type:"UPDATE_STATE",payload:e})}({user:e,can_edit:!0,rapid_api_key:n.val()}),t.navigate("Home",{})}))};return i.a.createElement(j.a,{style:Z.container},i.a.createElement(l.b,{label:"Email",onChangeText:function(e){c(e)}}),i.a.createElement(l.b,{label:"Password",secureTextEntry:!0,onChangeText:function(e){d(e)}}),i.a.createElement(l.a,{title:"Submit",onPress:function(){L.signInWithEmailAndPassword(o,v).then((function(e){p(e)})).catch((function(e){console.log(e)}))}}))},Z=s.a.create({container:{padding:20}}),$=n(156),ee=n(5),te=n.n(ee),ne={user:"",can_edit:!1,rapid_api_key:""};var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;return"UPDATE_STATE"===t.type?te()({},e,t.payload):e},ie=Object(o.a)(),re=Object($.b)(ae);function oe(){return i.a.createElement(u.a,{store:re},i.a.createElement(r.a,null,i.a.createElement(ie.Navigator,{initialRouteName:"Home"},i.a.createElement(ie.Screen,{name:"Home",component:m}),i.a.createElement(ie.Screen,{name:"Add Movie",component:x}),i.a.createElement(ie.Screen,{name:"Movies",component:G}),i.a.createElement(ie.Screen,{name:"Lists",component:z}),i.a.createElement(ie.Screen,{name:"List",component:N,options:function(e){return{title:e.route.params.name}}}),i.a.createElement(ie.Screen,{name:"Add Movie To List",component:U}),i.a.createElement(ie.Screen,{name:"Remove Movie From List",component:Y}),i.a.createElement(ie.Screen,{name:"Random Movie",component:V}),i.a.createElement(ie.Screen,{name:"Login",component:q}))))}},329:function(e,t,n){n(330),e.exports=n(489)},330:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/marcs-movies/expo-service-worker.js",{scope:"/marcs-movies/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))}},[[329,1,2]]]);
//# sourceMappingURL=app.82e1b63e.chunk.js.map